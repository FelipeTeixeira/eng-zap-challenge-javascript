<app-header
    *ngIf="companySelected"
    [isZapImoveis]="companySelected === 'zap-imoveis'"
    (clickedButton)="backProperties()">
</app-header>

<div *ngIf="property" class="page-property">
    <app-button-round (clicked)="backProperties()" class="button-back"></app-button-round>

    <app-gallery *ngIf="property.images.length" [photos]="property.images"></app-gallery>

    <div class="page-property__col">
        <section class="section property">
            <app-business-type [name]="property?.pricingInfos.businessType"></app-business-type>

            <h1 class="property__price">
                {{property?.pricingInfos.price | currency}}
            </h1>

            <small class="property__published">
                Publicado em {{property.updatedAt | date:'dd MMMM HH:mm'}}
            </small>

            <app-info-with-icon
                *ngIf="property.address.city"
                icon="assets/img/icon-map.svg"
                alt="Ícone de localização"
                [description]="property.address.city + ', ' + property.address.neighborhood">
            </app-info-with-icon>

        </section>

        <section class="pricingInfos section" *ngIf="property?.pricingInfos as pricingInfos">
            <ul class="pricingInfo">
                <li *ngIf="+property?.pricingInfos.monthlyCondoFee" class="pricingInfo__item">
                    Condominio:
                    <strong>
                        {{pricingInfos.monthlyCondoFee | currency}}
                    </strong>
                </li>
                <li *ngIf="+pricingInfos?.rentalTotalPrice" class="pricingInfo__item">
                    Preço c/ condomínio:
                    <strong>
                        {{pricingInfos?.rentalTotalPrice | currency}}
                    </strong>
                </li>
                <li *ngIf="pricingInfos?.yearlyIptu" class="pricingInfo__item">
                    IPTU:
                    <strong>
                        {{+pricingInfos.yearlyIptu ? (pricingInfos.yearlyIptu | currency) : 'Não informado'}}
                    </strong>
                </li>
            </ul>
        </section>

        <section class="section details">
            <h2 class="details__title">
                Detalhes
            </h2>
            <ul class="details__list">
                <li class="details__item">
                    <app-info-with-icon
                        type="round"
                        icon="assets/img/icon-area.svg"
                        [description]="property.usableAreas + ' m²'">
                    </app-info-with-icon>
                </li>
                <li class="details__item">
                    <app-info-with-icon
                        type="round"
                        icon="assets/img/icon-bathroom.svg"
                        [description]="property.bathrooms + ' Banheiro'">
                    </app-info-with-icon>
                </li>
                <li class="details__item">
                    <app-info-with-icon
                        type="round"
                        icon="assets/img/icon-bed.svg"
                        [description]="property.bedrooms + ' Quartos'">
                    </app-info-with-icon>
                </li>
                <li class="details__item">
                    <app-info-with-icon
                        type="round"
                        icon="assets/img/icon-car.svg"
                        [description]="property.parkingSpaces + ' Vagas'">
                    </app-info-with-icon>
                </li>
            </ul>
        </section>
    </div>
</div>

<section class="propertiesSimilar">
    <h3 class="propertiesSimilar__title">
        Imóveis similares
    </h3>
    <ul class="propertiesSimilar__content">
        <li *ngFor="let property of propertiesSimilar" [attr.id]="property.id" class="propertiesSimilar__row">
            <a [routerLink]="['/empresa/', companySelected, property.id]" [queryParams]="{page: currentPage}">
                <app-property-info-card
                    [images]="property.images"
                    [price]="+property?.pricingInfos.price"
                    [monthlyCondoFee]="+property?.pricingInfos.monthlyCondoFee"
                    [businessType]="property?.pricingInfos.businessType"
                    [address]="property.address"
                    [usableAreas]="property.usableAreas">
                </app-property-info-card>
            </a>
        </li>
    </ul>
</section>
